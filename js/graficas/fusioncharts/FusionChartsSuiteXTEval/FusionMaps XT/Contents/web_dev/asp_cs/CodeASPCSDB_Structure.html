<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Using with ASP.NET (C#) - Database Structure</title>
<link rel="stylesheet" type="text/css" href="../../assets/ui/css/style.css" />
<link rel="stylesheet" type="text/css" href="../../assets/prettify/prettify.css" />
<script type="text/javascript" src="../../assets/ui/js/jquery.min.js"></script>
<script type="text/javascript" src="../../assets/prettify/prettify.js"></script>

<style type="text/css">

div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }

a.whtbtnhide, a.whtbtnshow, a.whtbtnhidenav , a.whtbtnshownav { border-bottom:none !important; }

</style>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whmsg.js"></script>
<script type="text/javascript" language="javascript" src="../../assets/ui/js/whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="../../assets/ui/js/whtopic.js"></script>
<script type="text/javascript" src="../../assets/ui/js/lib.js"></script>

</head>
<body>
<!-- breadcrumb starts here -->
<div id="breadcrumb"></div>
<script type="text/javascript">
	document.write( addFCBreadcrumb( [ "Home|introduction/overview.html", "Guide for web developers", "Using with ASP.NET (C#)", "Plotting from database", "Database structure" ] ) );
</script>
<!-- breadcrumb ends here -->
<table width="98%" border="0" cellspacing="0" cellpadding="3" align="center">
  <tr> 
    <td class="pageHeader">Database Structure </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">Before going deeper into the codes and their logics, let us look at the database structure first. The database has been named as <span class="codeInline">FusionMapsDB</span>.</td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="highlightBlock">The Access database is present in <span class="codeInline">Download Package &gt;   Code  &gt; CS_NET &gt; DrillDown &gt; App_Data.</span></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="header">Tables</td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td height="26" valign="top" class="text">We have used 4 tables in the database, here are the details of all the tables. </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td height="16" valign="top" class="header1">Table name: <span class="codeInline">fcmap_master    </span></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">This table stores the internal IDs of each state in&nbsp; US map and their corresponding map file names. </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" ><table class="table" width="100%" cellspacing="0" cellpadding="0" border="0">
        <tr class="text tableAlternateHeader">
          <td width="13%" align="left" valign="top" class="header"><strong>Field</strong></td>
          <td width="14%" align="left" valign="top" class="header"><strong>Type</strong></td>
          <td width="63%" align="left" valign="top" class="header"><strong>Description</strong></td>
        </tr>
        <tr class="text">
          <td align="left" valign="top" class="codeInline">Internal_Id</td>
          <td align="left" valign="top" class="codeInline">Text</td>
          <td align="left" valign="top">This represents individual State present in the   US MAP.</td>
        </tr>
        <tr class="text tableAlternateDark">
          <td align="left" valign="top" class="codeInline">s_name</td>
          <td align="left" valign="top" class="codeInline">Text</td>
          <td align="left" valign="top">This stores short name of the states used in US MAP. </td>
        </tr>
        <tr class="text">
          <td align="left" valign="top" class="codeInline">l_name</td>
          <td align="left" valign="top" class="codeInline">Text</td>
          <td align="left" valign="top">This stores full name of the states in US MAP. </td>
        </tr>
        <tr class="text tableAlternateDark">
          <td align="left" valign="top" class="codeInline">map_swf</td>
          <td align="left" valign="top" class="codeInline">Text</td>
          <td align="left" valign="top">This is FusionMaps  XT Flash File name.</td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">We use different .swf files to display different maps. This table stores the .swf file name required to display the maps in our example along with the Internal Ids of that map. We also store abbreviated and real names of the parts of the maps in this table. </td>
  </tr>
 
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="header1">Table name: <span class="codeInline">fcmap_group_master</span></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">This table stores the names of major Category groups regarding employment.</td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><table width="100%" cellspacing="0" cellpadding="0" border="0-" class="table">
        <tr class="">
          <td width="13%" height="26" align="left" valign="top" class="header"><strong>Field</strong></td>
          <td align="left" valign="top" width="14%" class="header"><strong>Type</strong></td>
          <td align="left" valign="top" width="63%" class="header"><strong>Description</strong></td>
        </tr>
        <tr>
          <td align="left" class="codeInline" valign="top">group_id</td>
          <td align="left" class="codeInline" valign="top">Number</td>
          <td align="left" class="text" valign="top">Group ID i.e. 1/2/3 </td>
        </tr>
        <tr class="tableAlternateDark">
          <td align="left" class="codeInline" valign="top">group_name</td>
          <td align="left" class="codeInline" valign="top">Text</td>
          <td align="left" class="text" valign="top">Group Name i.e. business, service, unemployed</td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">This table stores the name and id of the employment groups, i.e. Business and Service. It also stores 'Unemployed' as a group here. </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="header1">Table name: <span class="codeInline">fcmap_subgroup_master</span></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">This table stores the subgroup names of each group said above. </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="table">
        <tr class="text tableAlternateHeader">
          <td align="left" valign="top" width="13%" class="header"><strong>Field</strong></td>
          <td align="left" valign="top" width="14%" class="header"><strong>Type</strong></td>
          <td align="left" valign="top" width="63%" class="header"><strong>Description</strong></td>
        </tr>
        <tr class="text">
          <td align="left" valign="top" class="codeInline"><p class="normal">group_id</p></td>
          <td align="left" valign="top" class="codeInline"><p class="normal">Number</p></td>
          <td align="left" valign="top"><p class="normal">Group id of Group Master </p></td>
        </tr>
        <tr class="text tableAlternateDark">
          <td align="left" valign="top" class="codeInline">subgroup_id</td>
          <td align="left" valign="top" class="codeInline">Number</td>
          <td align="left" valign="top">Subgroup id i.e. 1/2/3/4/5</td>
        </tr>
        <tr class="text">
          <td align="left" valign="top" class="codeInline">subgroup_name</td>
          <td align="left" valign="top" class="codeInline">Text</td>
          <td align="left" valign="top">Subgroup name of individual Group Master i.e. business -&gt; software , business -&gt; automobile</td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">Each group is divided into various sub-groups, e.g. 
	<ul>
	<li>We divide Business into Automobile, Communication, Evergy, Finance and Software subgroups.</li> 
	<li>We divide Service under Administration, Education, Law, Postal and Security subgroups.</li> 
	<li>We divide Unemployed group into different age-groups like 20-30 years, 30-40 years, 40-50 years, 50-60 years and 60 above.</li>
	</ul>
	 This table stores subgroup names, unique subgroup ids and the parent group id for each subgroup. </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="header1">Table name: <span class="codeInline">fcmap_distribution</span></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">This table stores the data for each subgroup for each entity for each state. Hence, this table is the main storehouse of data which we will use in our code. </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><table width="100%" cellspacing="0" cellpadding="0" border="0" class="table">
        <tr class="text tableAlternateHeader">
          <td width="13%" align="left" valign="top" class="header" ><strong>Field</strong></td>
          <td width="14%" align="left" valign="top" class="header" ><strong>Type</strong></td>
          <td width="63%" align="left" valign="top" class="header" ><strong>Description</strong></td>
        </tr>
        <tr class="text">
          <td align="left" valign="top" class="codeInline">Internal_Id</td>
          <td align="left" valign="top" class="codeInline">Text</td>
          <td align="left" valign="top">This represents individual State present in the   USA MAP [Internal Id from fcmap_master]</td>
        </tr>
        <tr class="text tableAlternateDark">
          <td align="left" valign="top" class="codeInline">entity_id</td>
          <td align="left" valign="top" class="codeInline">Text</td>
          <td align="left" valign="top">This  represents individual internal id of each USA State entity </td>
        </tr>
        <tr class="text">
          <td align="left" valign="top" class="codeInline">group_id</td>
          <td align="left" valign="top" class="codeInline">Number</td>
          <td align="left" valign="top">group id related to <span class="codeInline">fcmap_group_master</span> </td>
        </tr>
        <tr class="text tableAlternateDark">
          <td align="left" valign="top" class="codeInline">subgroup_id</td>
          <td align="left" valign="top" class="codeInline">Number</td>
          <td align="left" valign="top">subgroup id related to <span class="codeInline">fcmap_subgroup_master</span> </td>
        </tr>
        <tr class="text">
          <td align="left" valign="top" class="codeInline">data</td>
          <td align="left" valign="top" class="codeInline">Number</td>
          <td align="left" valign="top"><strong>This field stores the actual population data for each sub group of each county of each state of US. </strong></td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><span class="codeInline">fcmap_distribution</span> stores the actual data that are to be plotted in our example. It stores the number of people in each of the subgroups mentioned above along with respective subgroup id, group id, county code and state code. </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">Now, let's look at the Relations among these tables.</td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="header">Relations</td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text">The snap below shows the relationship among all the tables used in this database. </td>
  </tr>
  <tr>
    <td valign="top" class="text">      </td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><img src="../../Images/DBRelation2.jpg" width="670" height="151" class="imageBorder" /></td>
  </tr>
  <tr>
    <td valign="top" class="text">&nbsp;</td>
  </tr>
</table>
<!-- footer links starts-->
<div id="fcfooter"></div>
<script type="text/javascript">
	document.getElementById("fcfooter").innerHTML =  addFCFooter("Goal|CodeASPCSDB_Goal.html","Data to be plotted|CodeASPCSDB_Plot.html");
</script>
<!-- footer links ends -->
<script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--

	highlightSearch();

//-->
</script>
</body>
</html>
